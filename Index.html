<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Property Mortgage Estimator</title>
    <script src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
    <script src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        @keyframes fadeIn {
            from {
                opacity: 0;
                transform: translateY(20px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }
        .animate-fadeIn {
            animation: fadeIn 0.6s ease-out;
        }
    </style>
</head>
<body>
    <div id="root"></div>

    <script type="text/babel">
        const { useState } = React;

        const MortgageEstimator = () => {
            const [currentRate, setCurrentRate] = useState(6.125);
            const [downPaymentPercent, setDownPaymentPercent] = useState(3.5);
            const [pmiAmount, setPmiAmount] = useState(300);
            const [homeInsurance, setHomeInsurance] = useState(1400);
            const [isCalculating, setIsCalculating] = useState(false);
            const [showResults, setShowResults] = useState(false);

            const [scenarios, setScenarios] = useState([
                { price: 500000, tax: 12000 },
                { price: 550000, tax: 10000 },
                { price: 600000, tax: 12000 },
                { price: 650000, tax: 12000 }
            ]);

            const addScenario = () => {
                setScenarios([...scenarios, { price: 700000, tax: 12000 }]);
            };

            const removeScenario = (index) => {
                if (scenarios.length > 1) {
                    setScenarios(scenarios.filter((_, i) => i !== index));
                }
            };

            const updateScenario = (index, field, value) => {
                const updated = [...scenarios];
                updated[index][field] = parseFloat(value) || 0;
                setScenarios(updated);
            };

            const handleCalculate = () => {
                setIsCalculating(true);
                setShowResults(false);
                
                setTimeout(() => {
                    setIsCalculating(false);
                    setShowResults(true);
                }, 800);
            };

            const calculateMortgage = (propertyPrice, rate, downPayment, taxes, downPaymentPct) => {
                const principal = propertyPrice - downPayment;
                const monthlyRate = rate / 100 / 12;
                const numberOfPayments = 30 * 12;
                
                const monthlyPI = principal * (monthlyRate * Math.pow(1 + monthlyRate, numberOfPayments)) / 
                                (Math.pow(1 + monthlyRate, numberOfPayments) - 1);
                
                const monthlyTax = taxes / 12;
                const monthlyInsurance = homeInsurance / 12;
                const monthlyPMI = downPaymentPct < 20 ? pmiAmount : 0;
                const totalMonthly = monthlyPI + monthlyTax + monthlyInsurance + monthlyPMI;
                
                return {
                    monthlyPI: monthlyPI,
                    monthlyTax: monthlyTax,
                    monthlyInsurance: monthlyInsurance,
                    monthlyPMI: monthlyPMI,
                    totalMonthly: totalMonthly,
                    downPayment: downPayment,
                    loanAmount: principal
                };
            };

            return (
                <div className="min-h-screen bg-gradient-to-br from-blue-50 to-indigo-100 p-4">
                    <div className="max-w-7xl mx-auto">
                        <div className="text-center mb-8">
                            <div className="flex items-center justify-center gap-3 mb-4">
                                <svg className="text-blue-600" width="32" height="32" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2">
                                    <path d="M3 9l9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z"></path>
                                    <polyline points="9 22 9 12 15 12 15 22"></polyline>
                                </svg>
                                <h1 className="text-4xl font-bold text-gray-800">Property Mortgage Estimator</h1>
                            </div>
                            <p className="text-gray-600 text-lg">Create custom scenarios for your clients</p>
                        </div>

                        <div className="bg-white rounded-xl shadow-lg p-6 mb-6">
                            <h3 className="text-lg font-semibold text-gray-800 mb-4">Global Settings</h3>
                            <div className="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6">
                                <div>
                                    <label className="block text-sm font-medium text-gray-700 mb-2">PMI Amount ($)</label>
                                    <input
                                        type="number"
                                        min="0"
                                        value={pmiAmount}
                                        onChange={(e) => setPmiAmount(parseFloat(e.target.value) || 0)}
                                        className="w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"
                                    />
                                    <p className="text-xs text-gray-500 mt-1">Monthly PMI when down payment &lt; 20%</p>
                                </div>
                                
                                <div>
                                    <label className="block text-sm font-medium text-gray-700 mb-2">30-Year Fixed Rate (%)</label>
                                    <input
                                        type="number"
                                        step="0.01"
                                        min="0"
                                        max="15"
                                        value={currentRate}
                                        onChange={(e) => setCurrentRate(parseFloat(e.target.value) || 0)}
                                        className="w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"
                                    />
                                    <p className="text-xs text-gray-500 mt-1">Current market rate: ~6.125%</p>
                                </div>
                                
                                <div>
                                    <label className="block text-sm font-medium text-gray-700 mb-2">Down Payment (%)</label>
                                    <input
                                        type="number"
                                        min="0"
                                        max="50"
                                        value={downPaymentPercent}
                                        onChange={(e) => setDownPaymentPercent(parseFloat(e.target.value) || 0)}
                                        className="w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"
                                    />
                                </div>
                                
                                <div>
                                    <label className="block text-sm font-medium text-gray-700 mb-2">Annual Home Insurance ($)</label>
                                    <input
                                        type="number"
                                        min="0"
                                        value={homeInsurance}
                                        onChange={(e) => setHomeInsurance(parseFloat(e.target.value) || 0)}
                                        className="w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"
                                    />
                                    <p className="text-xs text-gray-500 mt-1">Annual homeowner's insurance premium</p>
                                </div>
                            </div>
                        </div>

                        <div className="bg-white rounded-xl shadow-lg p-6 mb-6">
                            <div className="flex items-center justify-between mb-4">
                                <h3 className="text-lg font-semibold text-gray-800">Property Scenarios</h3>
                                <button
                                    onClick={addScenario}
                                    className="flex items-center gap-2 bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 transition-colors"
                                >
                                    <span>+</span>
                                    Add Scenario
                                </button>
                            </div>
                            
                            <div className="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4">
                                {scenarios.map((scenario, index) => (
                                    <div key={index} className="flex items-center gap-3 p-4 border border-gray-200 rounded-lg bg-gray-50">
                                        <div className="flex-1">
                                            <label className="block text-xs font-medium text-gray-600 mb-1">Property Price</label>
                                            <input
                                                type="number"
                                                value={scenario.price}
                                                onChange={(e) => updateScenario(index, 'price', e.target.value)}
                                                className="w-full p-2 border border-gray-300 rounded text-sm focus:ring-2 focus:ring-blue-500 focus:border-transparent"
                                                placeholder="500000"
                                            />
                                        </div>
                                        <div className="flex-1">
                                            <label className="block text-xs font-medium text-gray-600 mb-1">Annual Tax</label>
                                            <input
                                                type="number"
                                                value={scenario.tax}
                                                onChange={(e) => updateScenario(index, 'tax', e.target.value)}
                                                className="w-full p-2 border border-gray-300 rounded text-sm focus:ring-2 focus:ring-blue-500 focus:border-transparent"
                                                placeholder="12000"
                                            />
                                        </div>
                                        {scenarios.length > 1 && (
                                            <button
                                                onClick={() => removeScenario(index)}
                                                className="mt-5 text-red-500 hover:text-red-700 transition-colors"
                                            >
                                                Ã—
                                            </button>
                                        )}
                                    </div>
                                ))}
                            </div>
                            
                            <div className="mt-6 flex justify-center">
                                <button
                                    onClick={handleCalculate}
                                    disabled={isCalculating}
                                    className={`flex items-center gap-3 px-8 py-4 rounded-lg font-semibold text-lg transition-all ${
                                        isCalculating 
                                            ? 'bg-gray-400 cursor-not-allowed' 
                                            : 'bg-gradient-to-r from-blue-600 to-indigo-600 hover:from-blue-700 hover:to-indigo-700 shadow-lg hover:shadow-xl'
                                    } text-white`}
                                >
                                    {isCalculating ? (
                                        <>
                                            <div className="animate-spin rounded-full h-6 w-6 border-b-2 border-white"></div>
                                            <span>Calculating...</span>
                                        </>
                                    ) : (
                                        <>
                                            <span>Calculate Payments</span>
                                        </>
                                    )}
                                </button>
                            </div>
                        </div>

                        {showResults && (
                            <div className="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6 animate-fadeIn">
                                {scenarios.map((scenario, index) => {
                                    const scenarioDownPayment = scenario.price * (downPaymentPercent / 100);
                                    const mortgage = calculateMortgage(
                                        scenario.price, 
                                        currentRate, 
                                        scenarioDownPayment, 
                                        scenario.tax, 
                                        downPaymentPercent
                                    );
                                
                                    return (
                                        <div key={index} className="bg-white rounded-xl shadow-lg overflow-hidden hover:shadow-xl transition-shadow duration-300">
                                            <div className="bg-gradient-to-r from-blue-500 to-indigo-600 p-4">
                                                <h3 className="text-xl font-bold text-white text-center">
                                                    ${(scenario.price / 1000).toFixed(0)}k
                                                </h3>
                                                <p className="text-blue-100 text-center text-sm">Property Price</p>
                                            </div>
                                            
                                            <div className="p-6">
                                                <div className="space-y-4">
                                                    <div className="flex justify-between items-center border-b pb-2">
                                                        <span className="text-gray-600 text-sm">Property Cost:</span>
                                                        <span className="font-semibold">${scenario.price.toLocaleString()}</span>
                                                    </div>
                                                    
                                                    <div className="flex justify-between items-center border-b pb-2">
                                                        <span className="text-gray-600 text-sm">Annual Property Tax:</span>
                                                        <span className="font-semibold">${scenario.tax.toLocaleString()}</span>
                                                    </div>
                                                    
                                                    <div className="flex justify-between items-center border-b pb-2">
                                                        <span className="text-gray-600 text-sm">Down Payment ({downPaymentPercent}%):</span>
                                                        <span className="font-semibold">${scenarioDownPayment.toLocaleString(undefined, {maximumFractionDigits: 0})}</span>
                                                    </div>
                                                    
                                                    <div className="flex justify-between items-center border-b pb-2">
                                                        <span className="text-gray-600 text-sm">Loan Amount:</span>
                                                        <span className="font-semibold">${mortgage.loanAmount.toLocaleString(undefined, {maximumFractionDigits: 0})}</span>
                                                    </div>
                                                    
                                                    <div className="bg-gray-50 rounded-lg p-4">
                                                        <h4 className="font-medium text-gray-700 mb-3 text-sm">Monthly Breakdown:</h4>
                                                        <div className="space-y-2 text-sm">
                                                            <div className="flex justify-between">
                                                                <span>Principal & Interest:</span>
                                                                <span>${mortgage.monthlyPI.toFixed(2)}</span>
                                                            </div>
                                                            <div className="flex justify-between">
                                                                <span>PMI:</span>
                                                                <span>${mortgage.monthlyPMI.toFixed(2)}</span>
                                                            </div>
                                                            <div className="flex justify-between">
                                                                <span>Home Owners Insurance:</span>
                                                                <span>${mortgage.monthlyInsurance.toFixed(2)}</span>
                                                            </div>
                                                            <div className="flex justify-between">
                                                                <span>Property Taxes:</span>
                                                                <span>${mortgage.monthlyTax.toFixed(2)}</span>
                                                            </div>
                                                            <hr className="my-2" />
                                                            <div className="flex justify-between font-bold text-base text-blue-600">
                                                                <span>Total Monthly:</span>
                                                                <span>${mortgage.totalMonthly.toFixed(2)}</span>
                                                            </div>
                                                        </div>
                                                    </div>
                                                    
                                                    <div className="bg-amber-50 border border-amber-200 rounded-lg p-3 mt-4">
                                                        <div className="flex items-start gap-2">
                                                            <svg className="h-4 w-4 text-amber-600 mt-0.5 flex-shrink-0" viewBox="0 0 20 20" fill="currentColor">
                                                                <path fillRule="evenodd" d="M8.257 3.099c.765-1.36 2.722-1.36 3.486 0l5.58 9.92c.75 1.334-.213 2.98-1.742 2.98H4.42c-1.53 0-2.493-1.646-1.743-2.98l5.58-9.92zM11 13a1 1 0 11-2 0 1 1 0 012 0zm-1-8a1 1 0 00-1 1v3a1 1 0 002 0V6a1 1 0 00-1-1z" clipRule="evenodd" />
                                                            </svg>
                                                            <div>
                                                                <p className="text-amber-800 font-medium text-xs mb-1">ESTIMATE ONLY</p>
                                                                <p className="text-amber-700 text-xs leading-tight">
                                                                    Not a loan commitment. Actual rates, terms, and payments may vary based on credit score, 
                                                                    income, property details, and market conditions. Consult with a mortgage professional 
                                                                    for accurate quotes and personalized advice.
                                                                </p>
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    );
                                })}
                            </div>
                        )}
                    </div>
                </div>
            );
        };

        ReactDOM.render(<MortgageEstimator />, document.getElementById('root'));
    </script>
</body>
</html>
